<h1>Editar Tutor</h1>
<div class="well">
    <form #formTutor="ngForm">
        <div class="form-group">
            <label for="nome">Nome:</label>
            <input type="text" class="form-control" id="nome" name="nome" [(ngModel)]="tutor.nome" #nome="ngModel"
                required>
            <div *ngIf="nome.errors && (nome.dirty || nome.touched)" class="alert alert-danger">
                <div [hidden]="!nome.errors?.required"> Digite o nome da pessoa. </div>
            </div>
        </div>

        <div class="row">
            <div class="col">
                <label for="email">E-mail:</label>
                <input type="text" class="form-control" id="email" name="email" [(ngModel)]="tutor.email"
                    #email="ngModel">
                <div *ngIf="email.errors && (email.dirty || email.touched)" class="alert alert-danger">
                    <div [hidden]="!email.errors?.required"> Digite o e-mail do tutor</div>
                </div>
            </div>

            <div class="col">
                <label for="profissao">Profissão:</label>
                <input type="text" class="form-control" id="profissao" name="profissao" [(ngModel)]="tutor.profissao"
                    #profissao="ngModel">
                <div *ngIf="profissao.errors && (profissao.dirty || profissao.touched)" class="alert alert-danger">
                    <div [hidden]="!profissao.errors?.required"> Digite a profissão</div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col">
                <label for="cpf">CPF:</label>
                <input type="text" class="form-control" id="cpf" name="cpf" [(ngModel)]="tutor.cpf" #cpf="ngModel">
                <div *ngIf="cpf.errors && (cpf.dirty || cpf.touched)" class="alert alert-danger">
                    <div [hidden]="!cpf.errors?.required"> Digite o cpf</div>
                </div>
            </div>

            <div class="col">
                <label for="telefone">Celular:</label>
                <input type="text" class="form-control" id="telefone" name="telefone" [(ngModel)]="tutor.telefone"
                    #telefone="ngModel">
                <div *ngIf="telefone.errors && (telefone.dirty || telefone.touched)" class="alert alert-danger">
                    <div [hidden]="!telefone.errors?.required"> Digite o Celular</div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col">
                <label for="cep">CEP:</label>
                <input type="text" class="form-control" id="cep" name="cep" [(ngModel)]="tutor.cep" #cep="ngModel">
                <div *ngIf="cep.errors && (cep.dirty || cep.touched)" class="alert alert-danger">
                    <div [hidden]="!cep.errors?.required"> Digite o o CEP</div>
                </div>
            </div>

            <div class="col">
                <label for="endereco">Endereço:</label>
                <input type="text" class="form-control" id="endereco" name="endereco" [(ngModel)]="tutor.endereco"
                    #endereco="ngModel">
                <div *ngIf="endereco.errors && (endereco.dirty || endereco.touched)" class="alert alert-danger">
                    <div [hidden]="!endereco.errors?.required"> Digite um endereço</div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col">
                <label for="complemento">Complemento:</label>
                <input type="text" class="form-control" id="complemento" name="complemento"
                    [(ngModel)]="tutor.complemento" #complemento="ngModel">
                <div *ngIf="complemento.errors && (complemento.dirty || complemento.touched)"
                    class="alert alert-danger">
                    <div [hidden]="!complemento.errors?.required"> Digite o complemento do Endereço</div>
                </div>
            </div>
        </div>

        <br>
        <div class="form-group">
            <button type="button" class="btn btn-primary" (click)="atualizar()" [disabled]="!formTutor.form.valid">
                <i class="fa fa-save" aria-hidden="true"></i> Atualizar
            </button>
            <button style="margin: 1px" type="button" class="btn btn-primary" (click)="openPopup()">Incluir um pet</button>
            <a class="btn btn-secondary" style="margin: 1px" [routerLink]="['/tutores']">
                <i class="fa fa-arrow-left" aria-hidden="true"></i> Voltar
            </a>
        </div>
    </form>
</div>

<hr>
<h3>Meus animalzinho</h3>
<hr />
<div class="modal" tabindex="-1" role="dialog" [ngStyle]="{'display':displayStyle}">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Novo paciente</h4>
            </div>
            <div class="modal-body">
                <!-- Formulario paciente-->
                <div class="well">
                    <form #formPaciente="ngForm">
                        <div class="form-group">
                            <label for="nome">Nome:</label>
                            <input type="text" class="form-control" id="nome" name="nome" [(ngModel)]="paciente.nome"
                                #nomep="ngModel" required>
                            <div *ngIf="nomep.errors && (nomep.dirty || nomep.touched)" class="alert alert-danger">
                                <div [hidden]="!nomep.errors?.required"> Digite o nome ou o aplido.</div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col">
                                <label for="raca">Raça</label>
                                <input type="text" class="form-control" id="raca" name="raca"
                                    [(ngModel)]="paciente.raca" #raca="ngModel" required>
                                <div *ngIf="raca.errors && (raca.dirty || raca.touched)" class="alert alert-danger">
                                    <div [hidden]="!raca.errors?.required"> Digite qual a raça</div>
                                </div>
                            </div>

                            <div class="col">
                                <label for="idade">Idade:</label>
                                <input type="text" class="form-control" id="idade" name="idade"
                                    [(ngModel)]="paciente.idade" #idade="ngModel" required>
                                <div *ngIf="idade.errors && (idade.dirty || idade.touched)" class="alert alert-danger">
                                    <div [hidden]="!idade.errors?.required"> Digite uma idade</div>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col">
                                <label for="castrado">Castrado?</label>
                                <input type="text" class="form-control" id="castrado" name="castrado"
                                    [(ngModel)]="paciente.castrado" #castrado="ngModel" required>
                                <div *ngIf="castrado.errors && (castrado.dirty || castrado.touched)"
                                    class="alert alert-danger">
                                    <div [hidden]="!castrado.errors?.required"> Informe se o paciente é castrado</div>
                                </div>
                            </div>
                        </div>

                        <br>
                        <div class="form-group">
                            <button type="button" class="btn btn-primary" (click)="inserirPaciente()"
                                [disabled]="!formPaciente.form.valid">
                                <i class="fa fa-save" aria-hidden="true"></i> Salvar
                            </button>
                        </div>
                    </form>
                </div>
                <!-- Formulario paciente-->
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" (click)="closePopup()">
                    Close
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Listagem de Pacientes desse tutor-->
<table class="table table-striped table-bordered table-hover">
    <tbody>
        <tr>
            <th>Nome</th>
            <th>Raca</th>
            <th>Idade</th>
        </tr>
        <tr *ngFor="let paciente of pacientes">
            <th>{{paciente.nome}}</th>
            <th>{{paciente.raca}}</th>
            <th>{{paciente.idade}}</th>
            <td class="text-center" style="width: 300px">
                <a href="#" title="Editar" alt="Editar" class="btn btn-xs btn-info"
                    [routerLink]="['/pacientes/editar', paciente.id]">
                    <i class="fa fa-edit" aria-hidden="true"></i> Editar
                </a>
            </td>
        </tr>
    </tbody>
</table>
<p *ngIf="pacientes.length==0">Nenhum paciente cadastrado.</p>